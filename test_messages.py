#!/usr/bin/env python3
"""
–¢–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
"""

import sqlite3

def test_message_loading():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    
    print("üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...")
    print("=" * 60)
    
    try:
        conn = sqlite3.connect('bookai.db')
        cursor = conn.cursor()
        
        # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –∑–∞–º–µ–Ω–∏–ª–∏
        test_messages = [
            ("ask_name", "–ü–æ–¥–µ–ª–∏—Å—å, –∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç üíå –ù–∞–º –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å, —á—Ç–æ–±—ã –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ç–µ–±–µ –ª–∏—á–Ω–æ"),
            ("email_saved", "‚úÖ Email —Å–æ—Ö—Ä–∞–Ω–µ–Ω! –¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∞—à–µ–π –ø–µ—Å–Ω–∏."),
            ("book_gift_reason", "–ù–∞–ø–∏—à–∏ –ø–æ –∫–∞–∫–æ–º—É –ø–æ–≤–æ–¥—É –º—ã —Å–æ–∑–¥–∞—ë–º –∫–Ω–∏–≥—É üìî\n–ò–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∞—Ä–æ–∫ –±–µ–∑ –ø–æ–≤–æ–¥–∞?"),
            ("book_photo_request", "–û—Ç–ª–∏—á–Ω–æ, —Ç–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ —Ç–≤–æ–µ —Ñ–æ—Ç–æ, –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–∞ –Ω—ë–º —Ö–æ—Ä–æ—à–æ –±—ã–ª–æ –≤–∏–¥–Ω–æ –ª–∏—Ü–æ.\n–¢–∞–∫ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—É—á–∏—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ—Ö–æ–∂–µ–π üíØ"),
            ("song_gift_reason", "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—à–∏ –ø–æ –∫–∞–∫–æ–º—É –ø–æ–≤–æ–¥—É –º—ã —Å–æ–∑–¥–∞—ë–º –ø–µ—Å–Ω—éüé∂\n–ò–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∞—Ä–æ–∫ –±–µ–∑ –ø–æ–≤–æ–¥–∞? –ê –ø–æ—Ç–æ–º –æ—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ."),
        ]
        
        for message_key, fallback in test_messages:
            print(f"\nüîç –¢–µ—Å—Ç–∏—Ä—É–µ–º: {message_key}")
            
            try:
                cursor.execute('SELECT content, is_active FROM bot_messages WHERE message_key = ?', (message_key,))
                result = cursor.fetchone()
                
                if result:
                    content, is_active = result
                    if is_active:
                        print(f"‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –±–∞–∑—ã: {content[:50]}...")
                        print(f"‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ!")
                    else:
                        print(f"‚ö†Ô∏è  –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback")
                        print(f"üìù Fallback: {fallback[:50]}...")
                else:
                    print(f"‚ùå –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –±–∞–∑–µ, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback")
                    print(f"üìù Fallback: {fallback[:50]}...")
                    
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ {message_key}: {e}")
        
        conn.close()
        
        print(f"\nüéâ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!")
        print("üí° –¢–µ–ø–µ—Ä—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –≤ –±–æ—Ç–µ!")
        print("\nüìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:")
        print("1. –ó–∞–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º")
        print("2. –ù–∞–π–¥–∏—Ç–µ –ª—é–±–æ–µ –∏–∑ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π")
        print("3. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ")
        print("4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–æ—Ç–µ - –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å—Å—è!")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

if __name__ == "__main__":
    test_message_loading()
